# MyApp
В этом репозитории находится код маленькой веб-формы написаной на python3-flask.
Также здесь имеется Dockerfile с которого создается образ для запуска в docker
Дополнительно есть код написан на Terraform который в инфраструктуре Openstack, создает сервер, открывает порт ssh и 5000 порт для веб-приложения
Дополнительно после деплоя сервера через Terraform код запускается ansible playbook с названием playbook_run_docker.yml который заходит на созданный 
сервер, устанавливает докер, скачивает докер образ и запускает его.

Пройдемся по порядку.

1. Командой git clone https://github.com/XDelayz/MyApp.git - мы скачиваем себе весь репозиторий для последующего деплоя приложения.
2. Подключаемся через Terraform к своей инфраструктуре в Openstack командой terraform init, предварительно у вас должен быть создан файл provider.tf чтобы вы могли попасть в свой Openstack.
3. Запускаем команду terraform apply и после проверки какие ресурсы будут созданы, нажимаем yes и начинается деплой, обращаю внимание на то что после того как терраформ сделает свои дела
   описанные в файле full_deploy.tf запуститься плейбук под названием playbook_run_docker.yml который зайдет на сервер, установит нужные зависимости для докера, скачает образ и запустит его,
   но увы, терраформ не прекратит свой деплой, поскольку ансибл не сообщает терраформу что он закончил свою работу, окончание работы Ansible можно будет увидеть перейдя по внешнему адресу и порту 5000,
   должна будет открытся форма, если форма открывается по адресу http://127.0.0.0:5000 - у вас будет свой адрес, значит считаем деплой успешным и можемо останавливать терраформ код.


